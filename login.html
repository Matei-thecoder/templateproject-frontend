<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="style-index.css" media="all" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="login.css">

</head>
<body>
    <div class="auth-buttons">
        <a href="register.html" class="auth-button">
            <i class="fa fa-user-plus"></i> Register
        </a>
        <a href="login.html" class="auth-button">
            <i class="fa fa-sign-in"></i> Login
        </a>
    </div>
    <div class="container hidden-print">
        <div class="row">
            <!-- Contactele vizibile inițial -->
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 0208 7404 089</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> 00447859421981</small></h4>
                <h4><small><img class="flag" src="uk.jpg" alt="UK"> 10 Clifton Avenue, PE3 6AY Peterborough, UK</small></h4>
            </div>
    
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 0040268473195</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> 0040734802215</small></h4>
                <h4><small><img class="flag" src="rom.jpg" alt="Romania"> Strada Republicii 2, Brașov, România</small></h4>
            </div>
    
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 0720469369</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> 0720469369</small></h4>
                <h4><small><img class="flag" src="sw.jpg" alt="Sweden"> Centralvägen 3, 141 46 Huddinge, Sweden</small></h4>
            </div>
    
            <!-- Butonul de afișare -->
            <div class="col-sm-2 col-xs-12 text-center">
                <button id="show-more" class="btn btn-primary">Show More <i class="fa fa-arrow-down"></i></button>
            </div>
        </div>

        <script src="script.js"></script>
    
        <!-- Contactele ascunse inițial -->
        <div class="row hidden-contacts">
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> +971553253003</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> +971553253003</small></h4>
                <h4><small><img class="flag" src="uae.jpg" alt="UAE"> Shop No:5 Al Raffa St, Dubai-UAE</small></h4>
            </div>
    
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 07859421981</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> +447859421981</small></h4>
                <h4><small><img class="flag" src="uk.jpg" alt="UK"> 301 Highfield Road, Birmingham, UK <em>(Services at this location are available by appointment only)</em></small></h4>
            </div>
    
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 07859421981</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> +447859421981</small></h4>
                <h4><small><img class="flag" src="uk.jpg" alt="UK"> 177a North End Road, London, UK <em>(Services at this location are available by appointment only)</em></small></h4>
            </div>

            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 07859421981</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> +447859421981</small></h4>
                <h4><small><img class="flag" src="uk.jpg" alt="UK"> Unit 1 Kinches Farm, Road Hill Catherington, Waterlooville Hants PO8 0TG <em>(Services at this location are available by appointment only)</em></small></h4>
            </div>
            
            <div class="col-sm-3 col-xs-4 text-center">
                <i class="fa fa-comments fa-3x text-primary"></i>
                <h4><small><i class="fa fa-phone text-primary"></i> 07859421981</small></h4>
                <h4><small><i class="fa-brands fa-whatsapp text-success"></i> +447859421981</small></h4>
                <h4><small><img class="flag" src="uk.jpg" alt="UK"> Unit 2 Old Mill Lane, Macclesfield, Cheshire SK11 7PA <em>(Services at this location are available by appointment only)</em></small></h4>
            </div>
        </div>
    </div>
    
    
    <div class="main-menu">
        <input type="checkbox" id="menu-toggle">
        <label for="menu-toggle" class="menu-icon"><i class="fa fa-bars"></i></label>
        <ul class="menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="promotions.html">Promotions</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="about-us.html">About Us</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="testimonials.html">Testimonials</a></li>
            <li><a href="repair-partners.html">Repair Partners</a></li>
            <li><a href="find-us.html">Find Us</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </div>

    <div class="container">
        <aside class="sidebar">
            <ul>
                <li onclick="showRepair('TomTom Repair')">TomTom Repair</li>
                <li onclick="showRepair('Garmin Repair')">Garmin Repair</li>
                <li onclick="showRepair('Apple Repair')">Apple Repair</li>
                <li onclick="showRepair('Audi Repair')">Audi Repair</li>
                <li onclick="showRepair('Autel Repair')">Autel Repair</li>
                <li onclick="showRepair('Samsung Repair')">Samsung Repair</li>
                <li onclick="showRepair('Snooper Repair')">Snooper Repair</li>
                <li onclick="showRepair('Dacia Repair')">Dacia Repair</li>
                <li onclick="showRepair('BMW Repair')">BMW Repair</li>
                <li onclick="showRepair('Citroen Repair')">Citroen Repair</li>
                <li onclick="showRepair('Ducati Repair')">Ducati Repair</li>
                <li onclick="showRepair('Skoda Repair')">Skoda Repair</li>
                <li onclick="showRepair('Vauxhall Repair')">Vauxhall Repair</li>
                <li onclick="showRepair('Volkswagen Repair')">Volkswagen Repair</li>
                <li onclick="showRepair('Jeep Repair')">Jeep Repair</li>
                <li onclick="showRepair('Infiniti Repair')">Infiniti Repair</li>
                <li onclick="showRepair('Fiat Repair')">Fiat Repair</li>
                <li onclick="showRepair('Kawasaki Repair')">Kawasaki Repair</li>
                <li onclick="showRepair('Peugeot Repair')">Peugeot Repair</li>
                <li onclick="showRepair('Renault Repair')">Renault Repair</li>
                <li onclick="showRepair('Seat Repair')">Seat Repair</li>
                <li onclick="showRepair('Smart Car Repair')">Smart Car Repair</li>
                <li onclick="showRepair('Lexus Repair')">Lexus Repair</li>
                <li onclick="showRepair('Land Rover Repair')">Land Rover Repair</li>
                <li onclick="showRepair('Nissan Repair')">Nissan Repair</li>
                <li onclick="showRepair('Mitsubishi Repair')">Mitsubishi Repair</li>
                <li onclick="showRepair('Maserati Repair')">Maserati Repair</li>
                <li onclick="showRepair('Mini Cooper Repair')">Mini Cooper Repair</li>
                <li onclick="showRepair('Mercedes Repair')">Mercedes Repair</li>
                <li onclick="showRepair('Suzuki Repair')">Suzuki Repair</li>
                <li onclick="showRepair('Honda Repair')">Honda Repair</li>
                <li onclick="showRepair('Toyota Repair')">Toyota Repair</li>
                <li onclick="showRepair('Ford Repair')">Ford Repair</li>
                <li onclick="showRepair('Alfa Romeo Repair')">Alfa Romeo Repair</li>
                <li onclick="showRepair('Kia Repair')">Kia Repair</li>
                <li onclick="showRepair('Range Rover Repair')">Range Rover Repair</li>
                <li onclick="showRepair('Hyundai Repair')">Hyundai Repair</li>
                <li onclick="showRepair('Navigon Repair')">Navigon Repair</li>
            </ul>
        </aside>
        <div class="container-log">
            <div class="form-container-log">
                <h2>Login</h2>
                <form id="login-form">
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="email" name="email" placeholder="Email" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="password" name="password" placeholder="Parolă" required>
                    </div>
                    <button type="submit" class="btn-log">Login</button>
                </form>
                <a href="#" class="forgot-password">Ai uitat parola?</a>
                <div class="social-login">
                    <p>Sau loghează-te cu:</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-google"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div id="error-message" style="color: red; display: none; margin-top: 10px;">
            <!-- Error messages will be dynamically inserted here -->
        </div>
    
        <!-- Success Message Display -->
        <div id="success-message" style="color: green; display: none; margin-top: 10px;">
            <!-- Success message with user's name will be inserted here -->
        </div>
    </div>

    <script>
        function showRepair(repair) {
            alert("Ai selectat: " + repair);
        }

        const form = document.getElementById('login-form');
    const errorMessageDiv = document.getElementById('error-message');
    const successMessageDiv = document.getElementById('success-message');

    form.addEventListener('submit', async function(event) {
        event.preventDefault();  // Prevent the form from submitting normally

        const formData = new FormData(form);

        const data = {
            email: formData.get('email'),
            password: formData.get('password')
        };

        try {
            // Send login request
            const response = await fetch('http://localhost:3000/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });

            if (response.ok) {
                const responseData = await response.json();
                console.log('Login successful:', responseData);

                // Show success message with user name
                const userName = responseData.name;  // Get username from cookies
                if (userName) {
                    successMessageDiv.textContent = `Hello ${userName}! You are now logged in.`;
                    successMessageDiv.style.display = 'block';
                }

                // Optionally redirect to a protected page after successful login
                //window.location.href = '/dashboard';  // Modify this as needed
            } else {
                const errorData = await response.json();
                console.error('Login error:', errorData);
                errorMessageDiv.textContent = errorData.error || 'A apărut o eroare. Te rugăm să încerci din nou.';
                errorMessageDiv.style.display = 'block';
            }
        } catch (error) {
            console.error('Request failed', error);
            errorMessageDiv.textContent = 'Eroare de rețea. Te rugăm să încerci mai târziu.';
            errorMessageDiv.style.display = 'block';
        }
    });

    // Utility function to get cookies by name
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
        return null;
    }
    </script>

</body>
</html>
